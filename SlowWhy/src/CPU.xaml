<UserControl
  x:Class="SlowWhy.CPU"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  xmlns:icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  d:DesignHeight="500" d:DesignWidth="400">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Border Grid.Row="0" Padding="10" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1">
      <Grid>
        <Button
          HorizontalAlignment="Left"
          Click="btnBack_Click"
          Style="{StaticResource ButtonDefault}"
          Padding="8,4">
          <StackPanel Orientation="Horizontal">
            <icon:PackIconPhosphorIcons Kind="ArrowLeft" Width="14" Height="14" VerticalAlignment="Center" />
            <TextBlock Margin="4,0,0,0" Text="Back" VerticalAlignment="Center" />
          </StackPanel>
        </Button>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
          <icon:PackIconPhosphorIcons Kind="Cpu" Width="16" Height="16" VerticalAlignment="Center" Foreground="{DynamicResource PrimaryBrush}" />
          <TextBlock Margin="6,0,0,0" Text="Processor (CPU)" FontWeight="SemiBold" VerticalAlignment="Center" />
        </StackPanel>
      </Grid>
    </Border>

    <Border
      Grid.Row="1"
      Margin="10"
      Padding="15"
      Background="{DynamicResource RegionBrush}"
      BorderBrush="{DynamicResource BorderBrush}"
      BorderThickness="1"
      CornerRadius="4">
      <StackPanel>
        <Grid>
          <TextBlock Text="Total Utilization" FontSize="12" VerticalAlignment="Bottom" />
          <TextBlock
            x:Name="txtTotalUsage"
            Text="0%"
            FontSize="36"
            HorizontalAlignment="Right"
            Foreground="{DynamicResource PrimaryBrush}" />
        </Grid>
        <ProgressBar
          x:Name="pbTotalUsage"
          Height="4"
          Margin="0,5,0,0"
          Maximum="100"
          Value="0" />
      </StackPanel>
    </Border>

    <Grid Grid.Row="2" Margin="10,0,10,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <TextBlock Text="Top Processes" FontSize="12" Margin="0,0,0,5" />

      <DataGrid
        x:Name="dgProcesses"
        Grid.Row="1"
        AutoGenerateColumns="False"
        IsReadOnly="True"
        HeadersVisibility="Column"
        GridLinesVisibility="Horizontal"
        RowHeight="28"
        FontSize="12">
        <DataGrid.Columns>
          <DataGridTextColumn Header="Process Name" Binding="{Binding Name}" Width="2*" />
          <DataGridTextColumn Header="PID" Binding="{Binding Id}" Width="0.8*" />
          <DataGridTextColumn Header="CPU %" Binding="{Binding Usage}" Width="1*" />
        </DataGrid.Columns>
        <DataGrid.ContextMenu>
          <ContextMenu>
            <MenuItem Header="Close Process" Click="CpuAppClose_Click">
              <MenuItem.Icon>
                <icon:PackIconPhosphorIcons Kind="X" Width="14" Height="14" />
              </MenuItem.Icon>
            </MenuItem>
          </ContextMenu>
        </DataGrid.ContextMenu>
      </DataGrid>
    </Grid>
  </Grid>
</UserControl>
